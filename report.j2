<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Kanban Metrics for {{ board_name }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation-icons/3.0/foundation-icons.min.css">
    <style type="text/css">
.content {
  margin: 1rem 0;
}
    </style>
  </head>
  <body>
    <div class="top-bar">
      <div class="top-bar-left">
        <ul class="dropdown menu" data-dropdown-menu>
          <li class="menu-text">{{  board_name }}</li>
        </ul>
      </div>
    </div>
    <div class="content">
      <section class="row">
        <h2>Cycle time <small>in average</small></h2>
        <hr/>
        <div class="row">
          <div class="large-4 columns">
            <div class="callout primary">
              <h5>This week
                <span class="float-right"> {{ results[0].period }} </span>
              </h5>
              <div class="stat">
                {{ results[0].cycle_time.round(2) }} hours
              </div>
            </div>
          </div>
          <div class="large-4 columns">
            <div class="callout">
              <h5>Last 3 weeks</h5>
              <div class="stat">
                {{ results[1].cycle_time.round(2) }} hours
              </div>
            </div>
          </div>
          <div class="large-4 columns">
            <div class="callout">
              <h5>Total</h5>
              <div class="stat">
                {{ results[2].cycle_time.round(2) }} hours
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="large-12 columns">
            <div class="callout">
              <canvas id="cycle_time_trend"></canvas>
            </div>
          </div>
        </div>
      </section>

      <section class="row">
        <h2>Throughput <small>cards per week</small></h2>
        <hr/>
        <div class="row">
          <div class="large-4 columns">
            <div class="callout primary">
              <h5>This week
                <span class="float-right"> {{ results[0].period }} </span>
              </h5>
              <div class="stat">
                {{ results[0].throughput.round(2) }} cards
              </div>
            </div>
          </div>
          <div class="large-4 columns">
            <div class="callout">
              <h5>Last 3 weeks</h5>
              <div class="stat">
                {{ results[1].throughput.round(2) }} cards
              </div>
            </div>
          </div>
          <div class="large-4 columns">
            <div class="callout">
              <h5>Total</h5>
              <div class="stat">
                {{ results[2].throughput.round(2) }} cards
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="large-12 columns">
            <div class="callout">
              <canvas id="throughput_trend"></canvas>
            </div>
          </div>
        </div>
      </section>

      <footer>
        <hr>
        <div class="row">
          <div class="medium-6 columns">
            <p>Crafted with <i class="fi-heart"></i> by <a href="http://codingstones.com">The Coding Stones</a></p>
          </div>

          <div class="medium-6 columns">
            <p class="text-right">Generated at: {{ now.strftime("%Y-%m-%d %H:%M") }}</p>
          </div>
        </div>
      </footer>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>
      <script>
var ctx = document.getElementById("cycle_time_trend");
var cycle_time_trend_chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: {{ cycle_time_trend.keys() }},
    datasets: [{
      label: 'Average Cycle Time (in hours)',
      data: {{ cycle_time_trend.values() }}
    }]
  }
});

var ctx = document.getElementById("throughput_trend");
var throughput_trend = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: {{ throughput_trend.keys() }},
    datasets: [{
      label: 'Cards moved to done (per week)',
      data: {{ throughput_trend.values() }}
    }]
  }
});
      </script>
  </body>
</html>
